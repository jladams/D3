<!DOCTYPE html>
<meta charset="utf-8">
<style>

</style>
<body>
<script src="http://d3js.org/d3.v4.min.js"></script>

<svg width="100%" height="100vh">
</svg>

<script>


d3.csv('https://raw.githubusercontent.com/jladams/elections/master/data/csv/statesAll.csv', function(error, data){
	dataStates = data.map(function(d) {
		d["year"] = +d["year"];
		d["votes"] = +d["votes"];
		d["party"] = d["party"];
		return d;
	});
	console.log(dataStates);
	
	var svg = d3.select("svg")

	svg.selectAll("circle")
		.data(dataStates, function(d) { return d; })
		.enter().append("circle")
		.attr("cy", function(d,i) { return Math.sqrt(d.votes * .05); })
		.attr("cx", function(d) { return (d.year - 1998) * 100; })
		.attr("r", function(d) { return Math.sqrt(d.votes * .0005); })
		.attr("fill", function(d) { 
			if (d.party == "dem") {
				return "blue";
			} else if (d.party == "rep") {
				return "red";
			} else {
				return "yellow";
			}
		})			
		.style("opacity", ".25")
		.on("mouseover", function(d){
			d3.select(this)
				.style("opacity",".75");
		})
		.on("mouseout", function(d){
			d3.select(this)
				.style("opacity", ".25");
		})
		.on("click", function(d){
			if(d3.select(this).attr("cy") != 800) {
				d3.select(this)
					.transition()
					.duration(2000)
					.attr("cy", 800);
				console.log(d.state);
			} else {
				d3.select(this)
					.transition()
					.duration(2000)
					.attr("cy", function(d,i) { return Math.sqrt(d.votes * .05); });
			}
		}); 

});



</script>
</body>

